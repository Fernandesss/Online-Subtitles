function extractDomain(n){var e;return e=n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0],e=e.split(":")[0]}function onoffOnlineSubOnPageFunc(){this.checked?chrome.storage.sync.get("onlineSubOnPage",function(n){var e;void 0!==n.onlineSubOnPage&&(e=n.onlineSubOnPage.indexOf(tabUrl),void 0!==e&&(n.onlineSubOnPage.splice(e,1),e=n.onlineSubOnPage,chrome.storage.sync.set({onlineSubOnPage:e},function(){onoffOnlineSubOnPage.checked=!0,onlineSubOnOnDomen()})))}):chrome.storage.sync.get("onlineSubOnPage",function(n){var e=[];void 0===n.onlineSubOnPage?e.push(tabUrl):e=n.onlineSubOnPage.concat(tabUrl),chrome.storage.sync.set({onlineSubOnPage:e},function(){onoffOnlineSubOnPage.checked=!1,onlineSubOffOnDomen()})})}function onoffOnlineSubFunc(){this.checked?chrome.storage.sync.set({onlineSub:!0},function(){onlineSubOn(),onoffOnlineSub.checked=!0}):chrome.storage.sync.set({onlineSub:!1},function(){onlineSubOff(),onoffOnlineSub.checked=!1})}function onlineSubOff(){chrome.runtime.sendMessage({onlineSubOffOn:"onlineSubOff"})}function onlineSubOn(){chrome.runtime.sendMessage({onlineSubOffOn:"onlineSubOn"})}function onlineSubOffOnDomen(){chrome.runtime.sendMessage({onlineSubOffOnDomen:"onlineSubOff"})}function onlineSubOnOnDomen(){chrome.runtime.sendMessage({onlineSubOnOnDomen:"onlineSubOn"})}var onoffOnlineSub=document.getElementById("onoffOnlineSub"),onoffOnlineSubOnPage=document.getElementById("onoffOnlineSubOnPage"),tabUrl,donateBtn=document.getElementById("donate_btn");donateBtn.addEventListener("click",function(){var n=document.getElementsByClassName("donate")[0];n.style.display=""}),chrome.tabs.query({active:!0},function(n){tabUrl=extractDomain(n[0].url)}),chrome.storage.sync.get("onlineSub",function(n){void 0===n.onlineSub?onoffOnlineSub.checked=!0:onoffOnlineSub.checked=n.onlineSub}),chrome.storage.sync.get("onlineSubOnPage",function(n){if(onoffOnlineSubOnPage.checked=!0,void 0!==n.onlineSubOnPage)for(var e=0;e<n.onlineSubOnPage.length;e++)n.onlineSubOnPage[e]===tabUrl&&(onoffOnlineSubOnPage.checked=!1)}),onoffOnlineSubOnPage.addEventListener("click",onoffOnlineSubOnPageFunc,!1),onoffOnlineSub.addEventListener("click",onoffOnlineSubFunc,!1);